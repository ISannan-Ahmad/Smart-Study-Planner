<!-- templates/_task_item.html -->
<div class="task-item group p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all {% if task.is_done %}bg-gray-50 opacity-90{% endif %}"
     data-id="{{ task.id }}"
     data-completed="{{ 'true' if task.is_done else 'false' }}"
     data-date="{{ task.scheduled_date.strftime('%Y-%m-%d') }}"
     data-duration="{{ task.duration_minutes }}">
  <div class="flex items-start">
    <a href="{{ url_for('main.complete_task', task_id=task.id) }}" 
       class="mr-3 mt-1 p-1.5 rounded-full {% if task.is_done %}bg-green-100 text-green-600{% else %}bg-gray-100 text-gray-400 group-hover:bg-green-50 group-hover:text-green-500{% endif %} transition-colors duration-300"
       onclick="return handleTaskCompletion(event, this)">
      <i class="fas {% if task.is_done %}fa-check-circle{% else %}fa-circle{% endif %} text-sm"></i>
    </a>
    <div class="flex-grow">
      <div class="flex justify-between items-start">
        <div>
          <h3 class="font-medium text-gray-800 {% if task.is_done %}line-through text-gray-600{% endif %}">
            {{ task.title }}
          </h3>
          <p class="text-sm text-gray-600 mt-1 {% if task.is_done %}opacity-75{% endif %}">
            {{ task.description }}
          </p>
        </div>
        <span class="text-xs px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 {% if task.is_done %}opacity-75{% endif %}">
          {{ task.duration_minutes }} min
        </span>
      </div>
      <div class="flex items-center mt-3 text-xs text-gray-500 {% if task.is_done %}opacity-75{% endif %}">
        <i class="far fa-calendar-alt mr-1.5"></i>
        <span>{{ task.scheduled_date.strftime('%a, %b %d') }}</span>
        <span class="mx-2 text-gray-300">|</span>
        {% if task.title.startswith('Study ') or task.title.startswith('Revise ') %}
        <span class="text-blue-500"><i class="fas fa-robot mr-1"></i>AI-generated</span>
        {% else %}
        <span class="text-green-500"><i class="fas fa-user mr-1"></i>Personal</span>
        {% endif %}
      </div>
    </div>
  </div>
</div>
